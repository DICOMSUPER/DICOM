app = 'ws-gateway'
primary_region = 'sin'

[build]
dockerfile = './apps/ws-gateway/Dockerfile'

[http_service]
internal_port = 3006
force_https = true
auto_stop_machines = 'suspend'
auto_start_machines = true
min_machines_running = 0
processes = ['app']

[[http_service.checks]]
interval = '15s'
timeout = '2s'
grace_period = '10s'
method = 'GET'
path = '/health'

[[services]]
internal_port = 5006
protocol = 'tcp'
auto_stop_machines = 'suspend'
auto_start_machines = true
min_machines_running = 0

[[services.ports]]
port = 5006
handlers = []

[services.concurrency]
type = 'connections'
soft_limit = 25
hard_limit = 50

[[vm]]
size = 'shared-cpu-1x'
